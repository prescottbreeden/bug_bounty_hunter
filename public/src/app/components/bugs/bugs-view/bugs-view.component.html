<section class="bug-view">
  <div class="bug-view__row">
    <div class="bug-view__row--cluster">
      <svg *ngIf="isFavorite" (click)="dislikeBug()" class="bug-view__icon--liked">
        <use xlink:href="assets/img/icons/sprite.svg#icon-heart"></use>
      </svg>
      <svg *ngIf="!isFavorite" (click)="likeBug()" class="bug-view__icon--unliked">
        <use xlink:href="assets/img/icons/sprite.svg#icon-heart-o"></use>
      </svg>
      <h2 class="bug-view__error">{{ bug.error }}</h2>
    </div>
    <div class="bug-view__row--col">
      <h5 class="bug-view__created"> 
        <span class="u-color-grey">posted</span>
        {{ bug.bug_created | timeAgo }}
      </h5>
      
      <h5 class="bug-view__created"> 
        <span class="u-color-grey">by</span>
        {{ bug.posted_by }}
      </h5>
    </div>
  </div>
  <div 
    [innerHtml]="bug.traceback"
    class="bug-view__traceback">
  </div>
  <div 
    [innerHtml]="bug.message"
    class="bug-view__message">
  </div>
</section>
<div class="u-divider">
  <div 
    class="bug-create__btn--toggle"
    (click)="toggleForm()">
    <p *ngIf="!showAnswerForm">Add Answer</p>
    <p *ngIf="showAnswerForm">Hide Form</p>
    <svg class="bug-create__icon"
    [class.u-rotate90]="showAnswerForm">
      <use xlink:href="assets/img/icons/sprite.svg#icon-chevron-right"></use>
    </svg>
  </div>
  <div *ngIf="showAnswerForm" class="row bug-create__form--block">
    <div class="bug-create col-2-of-4">
      <form 
        (submit)="onSubmitAnswer()" 
        class="bug-create__form">
        <input 
          type="hidden" 
          [(ngModel)]="newAnswer.posted_by" 
          name="newAnswer.posted_by">
        <input 
          type="hidden" 
          [(ngModel)]="newAnswer.bug_id" 
          name="newAnswer.bug_id">
        <div class="bug-create__form--row">
          <h4 class="bug-create__info--header">Add Answer</h4>
        </div>
        <div class="form__row">
          <quill-editor 
            [(ngModel)]="newAnswer.answer_content"
            #content="ngModel"
            name="newAnswer.answer_content"
            [style]="{height: '250px'}"
            id="content">
            <div quill-editor-toolbar>
              <span class="ql-formats">
                <button class="ql-bold" [title]="'Bold'"></button>
                <button class="ql-italic" [title]="'Italic'"></button>
                <button class="ql-code-block" [title]="'Code Block'"></button>
              </span>
            </div>
          </quill-editor>
        </div>
        <div *ngIf="formErrors.ContentField" class="reg__form--error">
          {{ formErrors.ContentField }}
        </div>
        <div class="u-spacer"></div>
        <button class="bug-create__btn">Add Answer</button>
      </form>
    </div>
    <div class="bug-create__info col-2-of-4">
      <h4 class="bug-create__info--header">Things to Consider</h4>
      <div class="bug-create__info--list">
        <div class="bug-create__info--row">
          <img src="assets/img/target_50px.png" alt="target" class="bug-create__bullseye">
          <p class="bug-create__info--bullet-title">Look for Typos</p> 
        </div>
        <div class="bug-create__info--row">
          <p class="bug-create__info--text">
            The majority of bugs are usually a typo of some sort, so be 
            on the prowl for them, especially if your first reaction is 
            'hmm, the code looks good'.
          </p>
        </div> 
        <div class="bug-create__info--row">
          <img src="assets/img/target_50px.png" alt="target" class="bug-create__bullseye">
          <p class="bug-create__info--bullet-title">Need More Info?</p> 
        </div>
        <div class="bug-create__info--row">
          <p class="bug-create__info--text">
            It is normal to sometimes need more information when you 
            are trying to help solve a bug. Feel free to ask if you 
            think it will help!
          </p>
        </div> 
        <div class="bug-create__info--row">
          <img src="assets/img/target_50px.png" alt="target" class="bug-create__bullseye">
          <p class="bug-create__info--bullet-title">Brevity is the Soul of Wit</p> 
        </div>
        <div class="bug-create__info--row">
          <p class="bug-create__info--text">
            Don't write a book; ain't nobody's got times for that.
          </p>
        </div> 
      </div>
    </div>
  </div>
</div>
  <div *ngIf="answers[0] && answers[0].answer_content !== null" class="answers">
    <div *ngFor="let answer of answers" class="answers__row">
      <div 
        [innerHtml]="answer['answer_content']"
        class="answers__content">
      </div>
      <div class="answers__info">
        <p> <span class="u-color-grey">posted</span> {{ answer.answer_created | timeAgo }} </p>
        <div class="answered_by"> {{ answer.answered_by }} </div>
      </div>
    </div>
  </div>
<div *ngIf="answers[0] && answers[0].answer_content === null" class="answers">
  There are currently no suggested solutions for this bug. You should be the first!
</div>
